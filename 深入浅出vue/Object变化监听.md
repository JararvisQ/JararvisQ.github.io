# Object 的变化监听

1. 变化检测

    - 有两种形式，分别是「推」、「拉」。其中pull，是通过知道数据发生变化了，会发送一个信号给框架，然后框架通过暴力对比来找出需要重新渲染的节点。例如：Angular的脏检查。
    - Vue是通过push的形式，在变量访问到时记录对应的节点（window.target）。可以进行颗粒度更细的更新。（意味着需要更多的内存）

2. 如何追踪变化：

    - 通过Object.defineProperty上添加属性改变时和访问时的钩子。在getter中收集相应的依赖，收集到的也就是「Dep」。当属性改变时在setter对所有收集到的依赖循环进行相应的操作。

    - 依赖其实有很多，模板，watch。。。

    - vm.$watch，在创建一个watch时，会以watcher的身份调用一次值，这时会调用getter，同时，watcher也会被收集到。

    - 对于对象，需要对所有的属性「data」，进行设置getter和setter，「class Observer」会对所有的属性转化为getter/setter形式，这时就生成我们说的「响应式对象」。

    - 缺陷：监听只能监听到对象属性的访问和修改。监听不了对象中新属性的新增和删除。