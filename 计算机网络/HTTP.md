# HTTP / 0.9 ~ HTTP / 1.1 （基于请求响应的模式）

## HTTP / 0.9（学术交流）
- 基于TCP同样经过3次握手。
- 建立好后会发送一个GET请求行信息，获取index.html
- 服务器接受到请求后，读取对应得HTML文件，将其以「ASCII」字符形式返回。
- 传输完成后断开链接。

### 随着1994年，网络拨号上网，网络资源丰富，不再局限于ASCII编码。为了适应多种请求的需要，产生了「请求头」和「响应头」等key-value的形式。

## HTTP / 1.0
![](https://static001.geekbang.org/resource/image/b5/7d/b52b0d1a26ff2b8607c08e5c50ae687d.png)
- 改进：
  1. 需求和返回「数据类型」的约定。
  2. 数据越来越大，所以需要对数据进行「压缩」，客户端必须知道压缩方法。
  3. 国际化「语言」。
  4. 文件的「编码」。
  ```
  accept: text/html
  accept-encoding: gzip, deflate, br
  accept-Charset: ISO-8859-1,utf-8
  accept-language: zh-CN,zh
  ```

- 新特性：
  1. 「状态码」。返回浏览器处理请求「处理结果」。
  2. 「cache机制」。减轻服务器压力。
  3. 客户端浏览器用户代理，例如：浏览器信息。

- 问题：
  1. 一次建立和断开TCP链接都需要进行三次握手和四次挥手。
  2. 页面内容动态生成，不好控制数据大小。
  3. 链接没有状态。

## HTTP / 1.1

### 新特性：
- 「改进持久链接」。在TCP链接上可以保持多个HTTP请求，只要浏览器和服务器没有断开，TCP都可以保持。
- 「不成熟的HTTP管线化」。在持久链接中，后面的请求需要等前面的请求返回后，才能请求。「队头阻塞」
  - 在此，HTTP / 1.1将多个HTTP请求整批发与服务器，但服务器还需根据请求顺序返回。
- 虚拟主机。处理同个IP多个「虚拟机」的情况。
- Chunk transfer。页面内容多数动态生成，不可预估数据大小，所以将其分割成若干个任意大小的数据块。每个数据会「带上数据的长度」。最后使用一个「0长度」的块做数据发送完成的标识。
- 客户端Cookie。身份鉴权。
